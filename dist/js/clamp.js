/*!
 * Clamp.js 0.5.1
 *
 * Copyright 2011-2013, Joseph Schmitt http://joe.sh
 * Released under the WTFPL license
 * http://sam.zoy.org/wtfpl/
 */(function(){window.$clamp=function(i,r){function y(e,n){return m.getComputedStyle||(m.getComputedStyle=function(h,S){return this.el=h,this.getPropertyValue=function(s){var M=/(\-([a-z]){1})/g;return s=="float"&&(s="styleFloat"),M.test(s)&&(s=s.replace(M,function(k,N,O){return O.toUpperCase()})),h.currentStyle&&h.currentStyle[s]?h.currentStyle[s]:null},this}),m.getComputedStyle(e,null).getPropertyValue(n)}function v(e){e=e||i.clientHeight;var n=H(i);return Math.max(Math.floor(e/n),0)}function x(e){return H(i)*e}function H(e){var n=y(e,"line-height");return n=="normal"&&(n=1.2*parseInt(y(e,"font-size"))),parseInt(n)}function c(e){return e.lastChild.children&&0<e.lastChild.children.length?c(Array.prototype.slice.call(e.children).pop()):e.lastChild&&e.lastChild.nodeValue&&e.lastChild.nodeValue!=""&&e.lastChild.nodeValue!=t.truncationChar?e.lastChild:(e.lastChild.parentNode.removeChild(e.lastChild),c(i))}function C(e,n){if(n){var h=e.nodeValue.replace(t.truncationChar,"");if(l||(o=0<p.length?p.shift():"",l=h.split(o)),1<l.length?(g=l.pop(),d(e,l.join(o))):l=null,f&&(e.nodeValue=e.nodeValue.replace(t.truncationChar,""),i.innerHTML=e.nodeValue+" "+f.innerHTML+t.truncationChar),l){if(i.clientHeight<=n)if(0<=p.length&&o!="")d(e,l.join(o)+o+g),l=null;else return i.innerHTML}else o==""&&(d(e,""),e=c(i),p=t.splitOnChars.slice(0),o=p[0],g=l=null);if(t.animate)setTimeout(function(){C(e,n)},t.animate===!0?10:t.animate);else return C(e,n)}}function d(e,n){e.nodeValue=n+t.truncationChar}r=r||{};var m=window,t={clamp:r.clamp||2,useNativeClamp:typeof r.useNativeClamp<"u"?r.useNativeClamp:!0,splitOnChars:r.splitOnChars||[".","-","–","—"," "],animate:r.animate||!1,truncationChar:r.truncationChar||"…",truncationHTML:r.truncationHTML},a=i.style,T=i.innerHTML,V=typeof i.style.webkitLineClamp<"u",u=t.clamp,w=u.indexOf&&(-1<u.indexOf("px")||-1<u.indexOf("em")),f;t.truncationHTML&&(f=document.createElement("span"),f.innerHTML=t.truncationHTML);var p=t.splitOnChars.slice(0),o=p[0],l,g;u=="auto"?u=v():w&&(u=v(parseInt(u)));var L;return V&&t.useNativeClamp?(a.overflow="hidden",a.textOverflow="ellipsis",a.webkitBoxOrient="vertical",a.display="-webkit-box",a.webkitLineClamp=u,w&&(a.height=t.clamp+"px")):(a=x(u),a<=i.clientHeight&&(L=C(c(i),a))),{original:T,clamped:L}}})();
